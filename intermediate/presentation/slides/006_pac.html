<section>
  <h2>Policy as a Code</h2>
  <p style="font-size: large">
    TFE uses <b>Policy as Code</b> via the sentinel framework to define and
    enforce access control policies across the organization. Policies are
    written in a declarative language and can be versioned and managed like
    code.
  </p>
  <pre
    class="fragment fade-up"
  ><code data-trim data-line-numbers="1|3-7|9-13|15-17">
            import "tfplan/v2" as tfplan

            s3_buckets = filter tfplan.resource_changes as _, rc {
                rc.type is "aws_s3_bucket" and
                (rc.change.actions contains "create" or 
                rc.change.actions is ["update"])
            }

            bucket_tags = rule {
                all s3_buckets as _, instances {
                    instances.change.after.tags is not null
                }
            }

            main = rule {
                bucket_tags
            }

          </code></pre>
</section>

<section data-auto-animate>

  <p>Sentinel policies can be applied on different levels:</p>
  <div
    class="fragment fade-in"
    data-id="adv"
    style="background-color: olivedrab; padding: 0.5em; border-radius: 20px"
  >
    <h4>advisory</h4>
    <p>
      Only prints a warning about failed policies. TFE run can still be applied.
    </p>
  </div>
</section>

<section data-auto-animate>
  <p>Sentinel policies can be applied on different levels:</p>
  <div
    data-id="adv"
    style="background-color: olivedrab; padding: 1em; border-radius: 20px"
  >
    <h4>advisory</h4>
  </div>
  <div
    data-id="sm"
    style="
      background-color: orange;
      padding: 0.5em;
      border-radius: 20px;
      margin-top: 10px;
    "
  >
    <h4>soft-mandatory</h4>
    <p>User a must acknowledge the policy violation before applying.</p>
  </div>
</section>

<section data-auto-animate>

  <p>Sentinel policies can be applied on different levels:</p>
  <div
    data-id="adv"
    style="background-color: olivedrab; padding: 0.5em; border-radius: 20px"
  >
    <h4>advisory</h4>
  </div>
  <div
    data-id="sm"
    style="
      background-color: orange;
      padding: 0.5em;
      border-radius: 20px;
      margin-top: 10px;
    "
  >
    <h4>soft-mandatory</h4>
  </div>
  <div
    data-id="hm"
    style="
      background-color: red;
      padding: 0.5em;
      border-radius: 20px;
      margin-top: 10px;
    "
  >
    <h4>hard-mandatory</h4>
    <p>The policy must pass in order to proceed.</p>
  </div>
</section>
